{"version":3,"sources":["../../src/js/index.js"],"names":[],"mappings":"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","file":"simple-notifier.esm.js","sourcesContent":["const mergeOptions = require(\"merge-options\");\nimport { getPropValue, motionAllowed, timeToMs } from \"@codebundlesbyvik/css-operations\";\nimport createEl from \"@codebundlesbyvik/element-operations\";\nimport getRandomIntUnder from \"@codebundlesbyvik/number-operations\";\n\nconst defaultOptions = {\n    autoHide: true,            // Number / Boolean\n    onlyOneNotification: true, // Boolean\n    parentEl: document.body,   // Element\n    position: \"top center\",    // String\n    animations: \"auto\"         // String / Boolean\n};\n\nclass SN {\n    constructor(userOptions = {}) {\n        this.mergedOptions = mergeOptions(defaultOptions, userOptions);\n\n        this.autoHide = this.mergedOptions.autoHide;\n        this.parentEl = this.mergedOptions.parentEl;\n        this.position = this.mergedOptions.position;\n        this.motionPref = this.mergedOptions.animations;\n\n        this.instanceId = null;\n\n        this.nId = 1;\n        this.nodes = {};\n        this.msgData = {};\n\n        this.timeoutIds = {};\n        this.events = {};\n        this.onlyOne = {\n            set: this.mergedOptions.onlyOneNotification,\n            states: {},\n            nextMsgData: {}\n        };\n\n        this.animatedRun = null;\n    }\n\n    static nodeClasses = {\n        wrapper: \"simple-notifier\",\n        notification: \"simple-notification\",\n        typeRegex: /simple-notification--[A-Za-z]+/g,\n        shown: \"is-shown\",\n        anim: {\n            base: \"animated\",\n            show: \"fadeIn\",\n            hide: \"fadeOut\"\n        }\n    }\n\n    static nodeSkeletons = {\n        wrapper: {\n            tagName: \"div\",\n            attrs: {\n                class: SN.nodeClasses.wrapper\n            }\n        },\n        notification: {\n            tagName: \"div\",\n            attrs: {\n                class: SN.nodeClasses.notification,\n                role: \"alert\"\n            }\n        },\n        message: {\n            tagName: \"p\",\n            attrs: {\n                class: `${SN.nodeClasses.notification}__message`\n            }\n        }\n    };\n\n    static defaultMsgData = {\n        notext: {\n            text: \"This is some dummy text for you, because none was passed in.\",\n            type: \"debug\"\n        },\n        notype: {\n            type: \"default\"\n        }\n    };\n\n    get animated() {\n        switch(this.motionPref) {\n            case \"undefined\":\n            case \"auto\":\n                return motionAllowed();\n            default:\n                return this.motionPref;\n        }\n    }\n\n    get hideCallTimeout() {\n        switch(this.autoHide) {\n            case true:\n                return 3500;\n            case false:\n                return 0;\n            default:\n                return this.autoHide;\n        }\n    }\n\n    init() {\n        console.log(\"SN: Running .init()...\");\n\n        if (this.instanceId) {\n            throw new Error(`SN: .init() has already been called on this instance (${this.instanceId}).`);\n        }\n\n        this.instanceId = getRandomIntUnder(100000);\n\n        this.nodes.wrapper = createEl(\n            SN.nodeSkeletons.wrapper.tagName,\n            SN.nodeSkeletons.wrapper.attrs\n        );\n\n        this.nodes.wrapper.dataset.instanceId = this.instanceId;\n\n        const parentElFChild = this.parentEl.firstElementChild;\n\n        // Insert the instance in the DOM after any earlier initialized instances sharing the same parentEl.\n        const wrapperSibling = parentElFChild.classList.contains(\"simple-notifier\")\n            ? parentElFChild.nextElementSibling\n            : parentElFChild;\n\n        this.parentEl.insertBefore(this.nodes.wrapper, wrapperSibling);\n\n        const screenPosArray = this.position.split(\" \");\n\n        // If only a y-position is set by the user, add an x-position.\n        if (screenPosArray.length === 1) {\n            screenPosArray[1] = \"center\";\n        }\n\n        this.nodes.wrapper.classList.add(\n            `${SN.nodeClasses.wrapper}--pos-y-${screenPosArray[0]}`,\n            `${SN.nodeClasses.wrapper}--pos-x-${screenPosArray[1]}`\n        );\n\n        this.events.allDestroyed = new CustomEvent(\"allNotificationsDestroyed\", { detail: {\n            instanceId: this.instanceId\n        }});\n\n        console.log(`SN: Instance ${this.instanceId} has been initialized.`);\n    }\n\n    destroy() {\n        console.log(\"SN: Running .destroy()...\");\n\n        if (!this.instanceId) {\n            throw new Error(\"SN: Instance isn't initialized!\");\n        }\n\n        if (this.runningDestroy) {\n            console.log(\"SN: .destroy was called whilst already running. Returning.\");\n\n            return;\n        }\n\n        this.runningDestroy = true;\n\n        this.nodes.wrapper.addEventListener(\"allNotificationsDestroyed\", (e) => {\n            console.log(\"SN: All notifications have been destroyed.\");\n\n            if (this.onlyOne) {\n                this.onlyOne.states = {};\n                this.onlyOne.nextMsgData = {};\n            }\n\n            this.events = {};\n\n            this.nId = 1;\n\n            this.instanceId = null;\n\n            delete this.runningDestroy;\n\n            console.log(`SN: Instance ${e.detail.instanceId} has been destroyed.`);\n        });\n\n        this.hide();\n    }\n\n    show(text, type) {\n        console.log(\"SN: Running .show()...\");\n\n        if (!this.instanceId) {\n            throw new Error(\"SN: Instance isn't initialized!\");\n        }\n\n        if (this.onlyOne.set) {\n            if (this.onlyOne.states.inReshow) {\n                console.log(\"SN: onlyOneNotification === true and .show() was called during execution ._reshowNotification(). Returning.\");\n\n                return;\n            }\n\n            if (this.onlyOne.states.isVisible) {\n                console.log(\"SN: onlyOneNotification === true and notification is currently visible. Calling ._reshowNotification()...\");\n\n                this._reshowNotification(text, type);\n\n                return;\n            }\n        }\n\n        let nId = this.nId;\n\n        if (!this.onlyOne.set) {\n            this.nId++;\n        }\n\n        this._initNotification(nId);\n\n        this._getMsgData(nId, text, type);\n\n        this._showNewNotification(nId);\n    }\n\n    _initNotification(nId) {\n        console.log(`SN: Running ._initNotification() on nId ${nId}...`);\n\n        this.nodes[nId] = {};\n\n        for (const [role, values] of Object.entries(SN.nodeSkeletons)) {\n            if (role === \"wrapper\")\n                continue;\n\n            this.nodes[nId][role] = createEl(values.tagName, values.attrs);\n\n            if (role === \"notification\") {\n                this.nodes.wrapper.insertBefore(\n                    this.nodes[nId][role],\n                    this.nodes.wrapper.firstElementChild\n                );\n            } else {\n                this.nodes[nId].notification.append(this.nodes[nId][role]);\n            }\n        }\n\n        this.nodes[nId].notification.dataset.notificationId = nId;\n\n        this.timeoutIds[nId] = {};\n\n        this.events[nId] = {};\n\n        this.events[nId].shown = new CustomEvent(\"notificationShown\", { detail: {\n            instanceId: this.instanceId,\n            notificationId: nId\n        }});\n        this.events[nId].destroyed = new CustomEvent(\"notificationDestroyed\", { detail: {\n            instanceId: this.instanceId,\n            notificationId: nId\n        }});\n\n        this.nodes.wrapper.addEventListener(\n            \"notificationShown\",\n            this.events[nId].shown,\n            { once: true }\n        );\n        this.nodes.wrapper.addEventListener(\n            \"notificationDestroyed\",\n            this.events[nId].destroyed,\n            { once: true }\n        );\n    }\n\n    _getMsgData(nId, text, type) {\n        console.log(`SN: Running ._getMsgData on nId ${nId}...`);\n\n        if (!text) {\n            if (this.onlyOne.nextMsgData) {\n                text = this.onlyOne.nextMsgData.text;\n                type = this.onlyOne.nextMsgData.type;\n\n                this.onlyOne.nextMsgData = {};\n            } else {\n                text = SN.defaultMsgData.notext.text;\n                type = SN.defaultMsgData.notext.type;\n            }\n        }\n\n        if (!type) {\n            type = SN.defaultMsgData.notype.type;\n        }\n\n        this.msgData[nId] = {};\n\n        this.msgData[nId].text = text;\n        this.msgData[nId].type = type;\n    }\n\n    _showNewNotification(nId) {\n        console.log(`SN: Running ._showNewNotification() on nId ${nId}...`);\n\n        this.animatedRun = this.animated;\n\n        this.nodes[nId].message.textContent = this.msgData[nId].text;\n\n        this.nodes[nId].notification.classList.add(\n            `${SN.nodeClasses.notification}--${this.msgData[nId].type}`,\n               SN.nodeClasses.shown\n        );\n\n        if (this.animatedRun) {\n            this.nodes[nId].notification.classList.add(\n                SN.nodeClasses.anim.base,\n                SN.nodeClasses.anim.show\n            );\n\n            const animTimeout = timeToMs(getPropValue(\n                this.nodes[nId].notification,\n                \"animation-duration\"\n            ));\n\n            this.timeoutIds[nId].showAnim = setTimeout(() => {\n                this.nodes[nId].notification.classList.remove(SN.nodeClasses.anim.show);\n            }, animTimeout);\n        }\n\n        if (this.onlyOne.set) {\n            this.onlyOne.states.isVisible = true;\n        }\n\n        this.nodes.wrapper.dispatchEvent(this.events[nId].shown);\n\n        if (this.hideCallTimeout > 0) {\n            this.timeoutIds[nId].hideCall = setTimeout(() => {\n                this.hide(nId);\n            }, this.hideCallTimeout);\n        } else {\n            this.animatedRun = null;\n        }\n    }\n\n    _reshowNotification(text, type) {\n        console.log(\"SN: Running ._reshowNotification()...\");\n\n        this.onlyOne.states.inReshow = true;\n\n        this.onlyOne.nextMsgData.text = text;\n        this.onlyOne.nextMsgData.type = type;\n\n        clearTimeout(this.timeoutIds[1].hideCall);\n\n        this.hide(1);\n    }\n\n    hide(nId) {\n        console.log(\"SN: Running .hide()...\");\n\n        if (!this.instanceId) {\n            throw new Error(\"SN: Instance isn't initialized!\");\n        }\n\n        if (this.onlyOne.set) {\n            if (this.onlyOne.states.inHide) {\n                console.log(\"SN: onlyOneNotification === true and .hide() was called whilst already running. Returning.\");\n\n                return;\n            }\n\n            this.onlyOne.states.inHide = true;\n        }\n\n        let nIdsArray;\n\n        if (typeof nId === \"number\") {\n            if (this.msgData[nId] === \"undefined\") {\n                console.warn(`SN: .hide() was called on a non-existant notification. Returning!`);\n\n                return;\n            }\n\n            nIdsArray = [nId];\n        }\n\n        if (typeof nId === \"undefined\") {\n            nIdsArray = Object.keys(this.msgData);\n\n            if (nIdsArray.length > 0) {\n                console.log(this.timeoutIds);\n\n                Object.values(this.timeoutIds).forEach((nTimeoutIds) => {\n                    Object.values(nTimeoutIds).forEach((timeoutId) => {\n                        clearTimeout(timeoutId);\n                    });\n                });\n            } else if (this.runningDestroy) {\n                this.nodes.wrapper.dispatchEvent(this.events.allDestroyed);\n            } else {\n                console.warn(\"SN: .hide() was called, but no notification is currently shown. Returning!\");\n\n                return;\n            }\n        }\n\n        let i = 1;\n\n        nIdsArray.forEach((id) => {\n            this._hideNotification(id);\n\n            i++;\n\n            if (this.onlyOne.set && i > nIdsArray.length) {\n                this.onlyOne.states.inHide = false;\n            }\n        });\n    }\n\n    _hideNotification(nId) {\n        console.log(`SN: Running ._hideNotification() on nId ${nId}...`);\n\n        if (this.animatedRun === null) {\n            this.animatedRun = this.animated;\n        }\n\n        let animTimeout = 0;\n\n        if (this.animatedRun) {\n            this.nodes[nId].notification.classList.add(SN.nodeClasses.anim.hide);\n\n            animTimeout = timeToMs(getPropValue(\n                this.nodes[nId].notification,\n                \"animation-duration\"\n            ));\n        }\n\n        this.timeoutIds[nId].hideAnim = setTimeout(() => {\n            this.nodes[nId].notification.classList.remove(SN.nodeClasses.shown);\n            this.nodes[nId].notification.className =\n                this.nodes[nId].notification.className.replace(SN.nodeClasses.typeRegex, \"\");\n\n            if (this.animatedRun) {\n                this.nodes[nId].notification.classList.remove(SN.nodeClasses.anim.hide);\n            }\n\n            if (this.onlyOne.set) {\n                this.onlyOne.states.isVisible = false;\n            }\n\n            this._destroyNotification(nId);\n        }, animTimeout);\n    }\n\n    _destroyNotification(nId) {\n        console.log(`SN: Running ._destroyNotification() on nId ${nId}...`);\n\n        const nodesArrayKeys = Object.keys(this.nodes[nId]);\n        const nodesArrayValues = Object.values(this.nodes[nId]);\n\n        new Promise((resolve) => {\n            let nodeKey = 0;\n\n            nodesArrayValues.forEach((node) => {\n                node.remove();\n\n                nodeKey++;\n\n                if (nodeKey === nodesArrayKeys.length) {\n                    resolve(\"All nodes have been removed succesfully.\");\n                }\n            });\n        })\n            .then(() => {\n                this.animatedRun = null;\n\n                delete this.nodes[nId];\n                delete this.msgData[nId];\n                delete this.timeoutIds[nId];\n\n                this.nodes.wrapper.dispatchEvent(this.events[nId].destroyed);\n\n                delete this.events[nId];\n\n                console.log(`SN: Notification ${nId} has succesfully been destroyed.`);\n\n                if (Object.keys(this.msgData).length === 0) {\n                    this.nodes.wrapper.dispatchEvent(this.events.allDestroyed);\n                }\n\n                if (this.onlyOne.set && this.onlyOne.states.inReshow) {\n                    this.onlyOne.states.inReshow = false;\n\n                    this.show();\n                }\n            })\n            .catch((error) => {\n                throw new Error(error);\n            });\n    }\n}\n\nexport default SN;\n"]}