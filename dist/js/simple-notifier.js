(()=>{var t={581:(t,e,s)=>{var i=s(450);t.exports=function(t){var e=parseFloat(t);switch(i(t)){case null:case"ms":return e;case"s":return 1e3*e;case"m":return 6e4*e;case"h":return 36e5*e;case"d":return 864e5*e;case"w":return 6048e5*e;default:return null}}},450:t=>{t.exports=function(t){var e=t.length;if(!t||!e)return null;for(var s=e;s--;)if(!isNaN(t[s]))return t.slice(s+1,e)||null;return null}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,s),o.exports}(()=>{"use strict";var t=s(581);function e(t,e){const s=document.createElement(t);if(e)for(const[t,i]of Object.entries(e))s.setAttribute(t.replace(/[A-Z]/g,(t=>"-".concat(t.toLowerCase()))),i);return s}function i(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const o={autoHide:!0,onlyOneNotification:!0,parentEl:document.body,position:"top center",animations:"auto"};class a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mergedOptions=Object.assign(o,t),this.autoHide=this.mergedOptions.autoHide,this.parentEl=this.mergedOptions.parentEl,this.position=this.mergedOptions.position,this.motionPref=this.mergedOptions.animations,this.instanceId=null,this.nId=1,this.nodes={},this.msgData={},this.timeoutIds={},this.events={},this.onlyOne={set:this.mergedOptions.onlyOneNotification,states:{},nextMsgData:{}},this.animatedRun=null}get animated(){switch(this.motionPref){case"undefined":case"auto":return!window.matchMedia("(prefers-reduced-motion: reduce)").matches;default:return this.motionPref}}get hideCallTimeout(){switch(this.autoHide){case!0:return 3500;case!1:return 0;default:return this.autoHide}}_eventCallbackShown(t){}_eventCallbackDestroyed(t){}init(){if(this.instanceId)throw new Error("SN: .init() has already been called on this instance.");this.instanceId=Math.floor(999*Math.random());const t=e(a.nodeSkeletons.wrapper.tagName,a.nodeSkeletons.wrapper.attrs);this.parentEl.insertBefore(t,this.parentEl.firstElementChild),this.nodes.wrapper=t;const s=this.position.split(" ");1===s.length&&(s[1]="center"),this.nodes.wrapper.classList.add("".concat(a.nodeClasses.wrapper,"--pos-y-").concat(s[0]),"".concat(a.nodeClasses.wrapper,"--pos-x-").concat(s[1]))}show(t,e){if(!this.instanceId)throw new Error("SN: .init() must be called at least once before usage!");if(this.onlyOne.set){if(this.onlyOne.states.inShow||this.onlyOne.states.inShowNew||this.onlyOne.states.inReshow||this.onlyOne.states.inHide)return;if(this.onlyOne.states.isVisible)return void this._reshowNotification(t,e);this.onlyOne.states.inShow=!0}let s=this.nId;this.onlyOne.set||this.nId++,this._initNotification(s),this._getMsgData(s,t,e),this._showNewNotification(s),this.onlyOne.set&&(this.onlyOne.states.inShow=!1)}_initNotification(t){this.nodes[t]={};for(const[s,i]of Object.entries(a.nodeSkeletons)){if("wrapper"===s)continue;const n=e(i.tagName,i.attrs);this.nodes[t][s]=n,"notification"===s?this.nodes.wrapper.insertBefore(n,this.nodes.wrapper.firstElementChild):this.nodes[t].notification.append(n)}this.timeoutIds[t]={},this.events[t]={},this.events[t].shown=new CustomEvent("notificationShown",{detail:{id:t}}),this.events[t].destroyed=new CustomEvent("notificationDestroyed",{detail:{id:t}}),this.events[t].shown.cbBound=this._eventCallbackShown.bind(this),this.events[t].destroyed.cbBound=this._eventCallbackDestroyed.bind(this),this.nodes.wrapper.addEventListener("notificationShown",this.events[t].shown.cbBound),this.nodes.wrapper.addEventListener("notificationDestroyed",this.events[t].destroyed.cbBound)}_getMsgData(t,e,s){e||(this.onlyOne.nextMsgData?(e=this.onlyOne.nextMsgData.text,s=this.onlyOne.nextMsgData.type,this.onlyOne.nextMsgData={}):(e=a.defaultMsgData.notext.text,s=a.defaultMsgData.notext.type)),s||(s=a.defaultMsgData.notype.type),this.msgData[t]={},this.msgData[t].text=e,this.msgData[t].type=s}_showNewNotification(e){if(this.onlyOne.set&&(this.onlyOne.states.inShowNew=!0),this.animatedRun=this.animated,this.nodes[e].message.textContent=this.msgData[e].text,this.nodes[e].notification.classList.add("".concat(a.nodeClasses.notification,"--").concat(this.msgData[e].type),a.nodeClasses.shown),this.onlyOne.set&&(this.onlyOne.states.isVisible=!0),this.animatedRun){this.nodes[e].notification.classList.add(a.nodeClasses.anim.base,a.nodeClasses.anim.show);const s=t(i(this.nodes[e].notification,"animation-duration"));this.timeoutIds[e].showAnim=setTimeout((()=>{this.nodes[e].notification.classList.remove(a.nodeClasses.anim.show),this.timeoutIds[e].showAnim=null}),s)}this.nodes.wrapper.dispatchEvent(this.events[e].shown),this.nodes.wrapper.removeEventListener("notificationShown",this.events[e].shown.cbBound),delete this.events[e].shown,this.hideCallTimeout>0?this.timeoutIds[e].hideCall=setTimeout((()=>{this.hide(e),this.timeoutIds[e].hideCall=null}),this.hideCallTimeout):this.animatedRun=null,this.onlyOne.set&&(this.onlyOne.states.inShowNew=!1)}_reshowNotification(t,e){this.onlyOne.states.inReshow=!0,this.onlyOne.nextMsgData.text=t,this.onlyOne.nextMsgData.type=e,clearTimeout(this.timeoutIds[1].hideCall),this.timeoutIds[1].hideCall=null,this.hide(1)}hide(t){if(this.onlyOne.set){if(this.onlyOne.states.inHide)return;this.onlyOne.states.inHide=!0}let e;if("number"==typeof t){if("undefined"===this.msgData[t])return;e=[t]}if(void 0===t&&(e=Object.keys(this.msgData),0===e.length))return;let s=1;e.forEach((t=>{this._hideNotification(t),s++,this.onlyOne.set&&s>e.length&&(this.onlyOne.states.inHide=!1)}))}_hideNotification(e){null===this.animatedRun&&(this.animatedRun=this.animated);let s=0;this.animatedRun&&(this.nodes[e].notification.classList.add(a.nodeClasses.anim.hide),s=t(i(this.nodes[e].notification,"animation-duration"))),this.timeoutIds[e].hideAnim=setTimeout((()=>{this.nodes[e].notification.classList.remove(a.nodeClasses.shown),this.nodes[e].notification.className=this.nodes[e].notification.className.replace(a.nodeClasses.typeRegex,""),this.animatedRun&&this.nodes[e].notification.classList.remove(a.nodeClasses.anim.hide),this.onlyOne.set&&(this.onlyOne.states.isVisible=!1),this._destroyNotification(e)}),s)}_destroyNotification(t){const e=Object.keys(this.nodes[t]),s=Object.values(this.nodes[t]);new Promise((t=>{let i=0;s.forEach((s=>{s.remove(),i++,i===e.length&&t("All nodes were removed succesfully.")}))})).then((()=>{this.nodes.wrapper.dispatchEvent(this.events[t].destroyed),this.nodes.wrapper.removeEventListener("notificationDestroyed",this.events[t].destroyed.cbBound),delete this.events[t],delete this.nodes[t],delete this.msgData[t],this.animatedRun=null,this.timeoutIds[t].hideAnim=null,this.onlyOne.set&&this.onlyOne.states.inReshow&&(this.onlyOne.states.inReshow=!1,this.show())})).catch((t=>{throw new Error(t)}))}}n(a,"nodeClasses",{wrapper:"simple-notifier",notification:"simple-notification",typeRegex:/simple-notification--[A-Za-z]+/g,shown:"is-shown",anim:{base:"animated",show:"fadeIn",hide:"fadeOut"}}),n(a,"nodeSkeletons",{wrapper:{tagName:"div",attrs:{class:a.nodeClasses.wrapper}},notification:{tagName:"div",attrs:{class:a.nodeClasses.notification,role:"alert"}},message:{tagName:"p",attrs:{class:"".concat(a.nodeClasses.notification,"__message")}}}),n(a,"defaultMsgData",{notext:{text:"This is some dummy text for you, because none was passed in.",type:"debug"},notype:{type:"default"}})})()})();
//# sourceMappingURL=simple-notifier.js.map